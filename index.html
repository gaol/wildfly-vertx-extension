<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Lin Gao">
<title>WildFly Vertx Extension Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>WildFly Vertx Extension Documentation</h1>
<div class="details">
<span id="author" class="author">Lin Gao</span><br>
<span id="revnumber">version 1.0.0-SNAPSHOT,</span>
<span id="revdate">2022-05-16</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview">1. Overview</a></li>
<li><a href="#_build_the_extension">2. Build the extension</a>
<ul class="sectlevel2">
<li><a href="#_start_the_server">2.1. Start the server</a></li>
</ul>
</li>
<li><a href="#_how_to_install_to_an_existing_wildfly_server">3. How to install to an existing WildFly server</a>
<ul class="sectlevel2">
<li><a href="#_install_the_whole_feature_pack">3.1. Install the whole feature pack</a></li>
<li><a href="#_install_part_of_the_feature_pack">3.2. Install part of the feature pack</a></li>
</ul>
</li>
<li><a href="#_the_vertx_subsystem_configuration">4. The vertx subsystem configuration</a>
<ul class="sectlevel2">
<li><a href="#_create_a_new_vert_x_instance">4.1. Create a new Vert.x instance</a>
<ul class="sectlevel3">
<li><a href="#_create_an_option_for_vert_x">4.1.1. Create an option for Vert.x</a>
<ul class="sectlevel4">
<li><a href="#_create_vertxoptions_using_a_json_file">Create VertxOptions using a JSON file</a></li>
<li><a href="#_create_an_option_with_attributes">Create an option with attributes</a></li>
</ul>
</li>
<li><a href="#_create_a_clustered_vert_x_instance">4.1.2. Create a clustered Vert.x instance</a>
<ul class="sectlevel4">
<li><a href="#_using_a_jgroups_stack_file">Using a JGroups stack file</a></li>
<li><a href="#_using_a_channel_from_jgroups_subsystem">Using a channel from jgroups subsystem</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_update_to_the_vert_x_instance">4.2. Update to the Vert.x instance</a></li>
</ul>
</li>
<li><a href="#_vertx_used_in_application">5. Vertx used in application</a>
<ul class="sectlevel2">
<li><a href="#_access_the_vert_x_instance_using_jndi_lookup">5.1. Access the Vert.x instance using JNDI lookup</a></li>
<li><a href="#_access_the_vert_x_instance_using_cdi">5.2. Access the Vert.x instance using CDI</a></li>
</ul>
</li>
<li><a href="#_deploy_verticles_to_wildfly_server">6. Deploy verticles to WildFly server</a>
<ul class="sectlevel2">
<li><a href="#_deployment_descriptor">6.1. Deployment Descriptor</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>&#169; 2022 The original authors.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a><a class="link" href="#_overview">1. Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the Vertx extension for <a href="https://www.wildfly.org/">WildFly Application Server</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://vertx.io/">Eclipse Vert.x</a> is a toolkit to build reactive applications on the JVM, integrating it adds more reactive power to WildFly.</p>
</div>
<div class="paragraph">
<p>It allows you to define Vertx instances using WildFly management model, these instances are managed by WildFly server. They can be accessed using JNDI lookup or CDI injection in your enterprise or web applications.</p>
</div>
<div class="paragraph">
<p>You can access Vertx core APIs and some components APIs in your applications.</p>
</div>
<div class="paragraph">
<p>You can package the Vert.x verticle implementation in the application, deploy it to WildFly server with a deployment descriptor, the server will do the deployment accordingly.</p>
</div>
<div class="paragraph">
<p>In case of clustering vertx instances, this extension uses <a href="https://github.com/vert-x3/vertx-infinispan/">vertx-infinispan</a> as the cluster manager to be able to talk with remote Vertx instances. You can specify the necessary JGroups settings for Vertx either using standard WildFly management model or specifying a JGroups stack file.</p>
</div>
<div class="paragraph">
<p>The built distribution of this extension is a full WildFly server with above capabilities, it produces only standalone configurations, domain mode is not supported currently.</p>
</div>
<div class="paragraph">
<p>It has a Galleon feature pack produced which can be installed to an existing WildFly server as well. You can install the full feature pack or layers of the feature pack it provides to the server.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_build_the_extension"><a class="anchor" href="#_build_the_extension"></a><a class="link" href="#_build_the_extension">2. Build the extension</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension uses <code>Maven</code> as the build tool.</p>
</div>
<div class="paragraph">
<p>Requirements to build the extension are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDK 11+</p>
</li>
<li>
<p>Maven 3.2.5+</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To build the extension, simply run the following command:</p>
</div>
<div class="listingblock">
<div class="title">Build command</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">mvn clean install</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the command finishes, it produces 2 server distributions and 1 <a href="https://docs.wildfly.org/galleon/">Galleon</a> feature pack:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A Thin server</p>
<div class="ulist">
<ul>
<li>
<p>It locates at <code>build/target/wildfly-vertx-build-1.0.0-SNAPSHOT/</code></p>
</li>
<li>
<p>The thin server contains all configurations and JBoss module files(<code>module.xml</code> ) which define the Maven artifact without having the jar files.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Full Server</p>
<div class="ulist">
<ul>
<li>
<p>It locates at <code>dist/target/wildfly-vertx-build-1.0.0-SNAPSHOT/</code></p>
</li>
<li>
<p>The full server contains everything including jar files</p>
</li>
</ul>
</div>
</li>
<li>
<p>A Galloen feature pack</p>
<div class="ulist">
<ul>
<li>
<p>It locates at <code>galleon-feature-pack/target/wildfly-vertx-feature-pack-1.0.0-SNAPSHOT.zip</code></p>
</li>
<li>
<p>This feature pack can be installed to an existing WildFly server.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both produced servers have <code>4</code> standalone configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>standalone-vertx-mini.xml</code></p>
<div class="ulist">
<ul>
<li>
<p>This is the minimal setup to have vertx subsystem added and <code>jaxrs-server</code> layer added.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>standalone-vertx.xml</code></p>
<div class="ulist">
<ul>
<li>
<p>This is the setup with vertx subsystem added compared to standard standalone.xml in WildFly server</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>standalone-vertx-ha.xml</code></p>
<div class="ulist">
<ul>
<li>
<p>This is the setup with vertx subsystem added compared to standard standalone-ha.xml in WildFly server</p>
</li>
<li>
<p>The default vertx in this setup is a clustered vertx with default configuration.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>standalone-vertx-full-ha.xml</code></p>
<div class="ulist">
<ul>
<li>
<p>This is the setup with vertx subsystem added compared to standard standalone-full-ha.xml in WildFly server</p>
</li>
<li>
<p>The default vertx in this setup is a clustered vertx with default configuration.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_start_the_server"><a class="anchor" href="#_start_the_server"></a><a class="link" href="#_start_the_server">2.1. Start the server</a></h3>
<div class="paragraph">
<p>You can start the servers using the same way how WildFly server gets started:</p>
</div>
<div class="listingblock">
<div class="title">Start Server</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$SERVER_HOME/bin/standalone.sh -c standalone-vertx-mini.xml</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_install_to_an_existing_wildfly_server"><a class="anchor" href="#_how_to_install_to_an_existing_wildfly_server"></a><a class="link" href="#_how_to_install_to_an_existing_wildfly_server">3. How to install to an existing WildFly server</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have an existing WildFly server already, you have 2 options to have this extension installed, one is to install the whole feature pack, the other is to install part of the feature pack.</p>
</div>
<div class="sect2">
<h3 id="_install_the_whole_feature_pack"><a class="anchor" href="#_install_the_whole_feature_pack"></a><a class="link" href="#_install_the_whole_feature_pack">3.1. Install the whole feature pack</a></h3>
<div class="listingblock">
<div class="title">Install feature pack to existing server</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">galleon.sh install --dir=local_server "wildfly-ee@maven(org.jboss.universe:community-universe):current#26.0.1.Final"

galleon.sh install --dir=local_server org.wildfly.extension.vertx:wildfly-vertx-feature-pack:1.0.0-SNAPSHOT</code></pre>
</div>
</div>
<div class="paragraph">
<p>after it completes, the <code>vertx</code> subsystem and the required bits are downloaded and installed to the existing server with an additional layer called <code>vertx</code> created in <code>&lt;SERVER_DIR&gt;/modules/system/layers/</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_install_part_of_the_feature_pack"><a class="anchor" href="#_install_part_of_the_feature_pack"></a><a class="link" href="#_install_part_of_the_feature_pack">3.2. Install part of the feature pack</a></h3>
<div class="paragraph">
<p>The feature pack has 2 Galleon layers produced:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>vertx</code></p>
</li>
<li>
<p><code>vertx-ha</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can specify one of them to install to an existing server, similar as above, run:</p>
</div>
<div class="listingblock">
<div class="title">Install part of the feature pack to existing server</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">galleon.sh install --dir=local_server "wildfly-ee@maven(org.jboss.universe:community-universe):current#26.0.1.Final"

galleon.sh install --dir=local_server org.wildfly.extension.vertx:wildfly-vertx-feature-pack:1.0.0-SNAPSHOT --layers=vertx</code></pre>
</div>
</div>
<div class="paragraph">
<p>this will update the default configuration <code>standalone.xml</code> instead of producing new configurations, and it will download necessary bits.</p>
</div>
<div class="paragraph">
<p>in case of clustered Vertx, you need layer of <code>vertx-ha</code>, and you need to specify the ha configuration to update:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">galleon.sh install --dir=local_server "wildfly-ee@maven(org.jboss.universe:community-universe):current#26.0.1.Final"

galleon.sh install --dir=local_server org.wildfly.extension.vertx:wildfly-vertx-feature-pack:1.0.0-SNAPSHOT --layers=vertx-ha --config=standalone-ha.xml</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To have <code>galleon.sh</code> script work, please check the <a href="https://docs.wildfly.org/21/Galleon_Guide.html#download-and-installation-of-the-galleon-command-line-tool">Galleon Provisioning Guide</a> on how to download and install the Gallon CLI tool.
</td>
</tr>
</table>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_vertx_subsystem_configuration"><a class="anchor" href="#_the_vertx_subsystem_configuration"></a><a class="link" href="#_the_vertx_subsystem_configuration">4. The vertx subsystem configuration</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is a <code>default</code> Vert.x instance created in each standalone configuration by default.</p>
</div>
<div class="paragraph">
<p>After server starts, in a JBoss CLI console, you can see the default vertx resource like:</p>
</div>
<div class="listingblock">
<div class="title">Read Default Vertx Resource</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[lgao@lins-p1 wildfly-vertx-extention]$ build/target/wildfly-vertx-build-1.0.0-SNAPSHOT/bin/jboss-cli.sh -c
[standalone@localhost:9990 /] /subsystem=vertx/vertx=default:read-resource()
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "alias" =&gt; ["vertx"],
        "clustered" =&gt; false,
        "forked-channel" =&gt; false,
        "jgroups-channel" =&gt; undefined,
        "jgroups-stack-file" =&gt; undefined,
        "jndi-name" =&gt; "java:/vertx/default",
        "option-name" =&gt; undefined
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each Vert.x instance has a global unique name in WildFly server which is <code>default</code> in this case, it has the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>alias</code>    -    The Vert.x instance alias name</p>
<div class="ulist">
<ul>
<li>
<p>This is a string array which will be used in the CDI injection point, like: <code>@Inject Vertx vertx</code> will have the Vert.x instance injected which has alias: <code>vertx</code>.</p>
</li>
<li>
<p>The alias names are global unique as well.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>clustered</code>    -    Flag that if it is a clustered Vert.x instance.</p>
<div class="ulist">
<ul>
<li>
<p>Defaults to <code>false</code></p>
</li>
<li>
<p>When it is set to <code>true</code>, either <code>jgroups-channel</code> or <code>jgroups-stack-file</code> should be specified, otherwise, the default <a href="https://vertx.io/docs/apidocs/io/vertx/ext/cluster/infinispan/InfinispanClusterManager.html/">InfinispanClusterManager</a> will be used.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>forked-channel</code>    -    Flag if the forked channel needs to be used</p>
<div class="ulist">
<ul>
<li>
<p>It is used only when <code>clustered</code> is <code>true</code> and <code>jgroups-channel</code> is specified.</p>
</li>
<li>
<p>Technically, when it is set to <code>true</code>, the <code>JGroupsRequirement.CHANNEL_FACTORY</code> from WildFly clustering JGroups SPI is used for the JChannel creation, while it is set to <code>false</code>(default), the <code>JGroupsRequirement.CHANNEL_SOURCE</code> is used for the JChannel creation.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>jgroups-channel</code>    -    The JGroups Channel which is used for JChannel creation</p>
<div class="ulist">
<ul>
<li>
<p>It is used only when <code>clustered</code> is <code>true</code>.</p>
</li>
<li>
<p>It comes from resources under <code>/subsystem=jgroups/channel=XX</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>jgroups-stack-file</code>    -    The JGroups stack file used to compose the JGroups cluster</p>
<div class="ulist">
<ul>
<li>
<p>It is used only when <code>clustered</code> is <code>true</code>.</p>
</li>
<li>
<p>It is either an absolute file starts with <code>/</code> or a file relatives to <code>${jboss.server.config.dir}</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>jndi-name</code>    -    The JNDI name which is bound to the naming subsystem.</p>
<div class="ulist">
<ul>
<li>
<p>It is <code>java:/vertx/ + &lt;Vertx Name&gt;</code> if not specified.</p>
</li>
<li>
<p>The Vert.x instance can only be looked up in local JVM.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>option-name</code>    -    The option name used to create the Vert.x instance</p>
<div class="ulist">
<ul>
<li>
<p>The default <code>VertxOptions</code> instance is used to create the Vert.x instance if this is not set.</p>
</li>
<li>
<p>It comes from resources either in <code>/subsystem=vertx/vertx-option=XX</code> or in <code>/subsystem=vertx/vertx-option-file=XX</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
when both <code>jgroups-channel</code> and <code>jgroups-stack-file</code> are specified, there will be an exception thrown out.
</td>
</tr>
</table>
</div>
</blockquote>
</div>
<div class="sect2">
<h3 id="_create_a_new_vert_x_instance"><a class="anchor" href="#_create_a_new_vert_x_instance"></a><a class="link" href="#_create_a_new_vert_x_instance">4.1. Create a new Vert.x instance</a></h3>
<div class="paragraph">
<p>The simplest way to define a Vert.x instance is:</p>
</div>
<div class="listingblock">
<div class="title">Create a new Vert.x Instance</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[standalone@localhost:9990 /] /subsystem=vertx/vertx=v1:add()
{"outcome" =&gt; "success"}
[standalone@localhost:9990 /] /subsystem=vertx/vertx=v1:read-resource()
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "alias" =&gt; undefined,
        "clustered" =&gt; false,
        "forked-channel" =&gt; false,
        "jgroups-channel" =&gt; undefined,
        "jgroups-stack-file" =&gt; undefined,
        "jndi-name" =&gt; "java:/vertx/v1",
        "option-name" =&gt; undefined
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the JBoss CLI above completes, a new Vert.x instance is created within WildFly server with name <code>v1</code> and JNDI: <code>java:vertx/v1</code>.</p>
</div>
<div class="paragraph">
<p>You can refer to an option to customize the <code>VertxOptions</code> which is used to create the Vert.x instance, but you need to create the option first.</p>
</div>
<div class="sect3">
<h4 id="_create_an_option_for_vert_x"><a class="anchor" href="#_create_an_option_for_vert_x"></a><a class="link" href="#_create_an_option_for_vert_x">4.1.1. Create an option for Vert.x</a></h4>
<div class="paragraph">
<p>You have 2 options to create a <code>VertxOptions</code> instance, one is to create the option by specifying a JSON file path, the other is to create the option by specifying each attribute using WildFly management model.</p>
</div>
<div class="sect4">
<h5 id="_create_vertxoptions_using_a_json_file"><a class="anchor" href="#_create_vertxoptions_using_a_json_file"></a><a class="link" href="#_create_vertxoptions_using_a_json_file">Create VertxOptions using a JSON file</a></h5>
<div class="paragraph">
<p>Using the following command in JBoss CLI to create a VertxOptions by specifying a JSON file path:</p>
</div>
<div class="listingblock">
<div class="title">Create VertxOptions by a JSON file</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[standalone@localhost:9990 /] /subsystem=vertx/vertx-option-file=vof:add(path=default-vertx-options.json)
{"outcome" =&gt; "success"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here the path of <code>default-vertx-options.json</code> is expected at <code>${jboss.server.config.dir}</code>. After it completes, you can refer to <code>vof</code> in the command:</p>
</div>
<div class="listingblock">
<div class="title">Create Vertx by referring to an option</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[standalone@localhost:9990 /] /subsystem=vertx/vertx=v2:add(option-name=vof)
{"outcome" =&gt; "success"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>to create the Vert.x instance.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>path</code> of the JSON file is either an absolute file starts with <code>/</code> or a file relatives to <code>${jboss.server.config.dir}</code>.
</td>
</tr>
</table>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The format of the JSON file follows what <a href="https://vertx.io/docs/apidocs/io/vertx/core/VertxOptions.html#VertxOptions-io.vertx.core.json.JsonObject-">VertxOptions(JsonObject json)</a> requires.
</td>
</tr>
</table>
</div>
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_create_an_option_with_attributes"><a class="anchor" href="#_create_an_option_with_attributes"></a><a class="link" href="#_create_an_option_with_attributes">Create an option with attributes</a></h5>
<div class="paragraph">
<p>You can create a <code>VertxOptions</code> by specifying each attribute as well.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a look at what an option resource normally has:</p>
</div>
<div class="listingblock">
<div class="title">Typical VertxOptions resource</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[standalone@localhost:9990 /] /subsystem=vertx/vertx-option=vo:read-resource()
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "address-resolver-option" =&gt; "aro",
        "blocked-thread-check-interval" =&gt; undefined,
        "blocked-thread-check-interval-unit" =&gt; undefined,
        "classpath-resolving-enabled" =&gt; undefined,
        "disable-tccl" =&gt; undefined,
        "event-loop-pool-size" =&gt; undefined,
        "eventbus-option" =&gt; "ebo",
        "file-cache-enabled" =&gt; undefined,
        "ha-enabled" =&gt; undefined,
        "ha-group" =&gt; undefined,
        "internal-blocking-pool-size" =&gt; undefined,
        "max-eventloop-execute-time" =&gt; undefined,
        "max-eventloop-execute-time-unit" =&gt; undefined,
        "max-worker-execute-time" =&gt; undefined,
        "max-worker-execute-time-unit" =&gt; undefined,
        "prefer-native-transport" =&gt; undefined,
        "quorum-size" =&gt; undefined,
        "warning-exception-time" =&gt; undefined,
        "warning-exception-time-unit" =&gt; undefined,
        "worker-pool-size" =&gt; undefined
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>All attributes except for <code>address-resolver-option</code> and <code>eventbus-option</code> are primitive types.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>address-resolver-option</code> refers to what <code>/subsystem=vertx/address-resolver-option=aro</code> defines:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">AddressResolverOptions defintion:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[standalone@localhost:9990 /] /subsystem=vertx/address-resolver-option=aro:read-resource()
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "cache-max-time-to-live" =&gt; undefined,
        "cache-min-time-to-live" =&gt; undefined,
        "cache-negative-time-to-live" =&gt; undefined,
        "hosts-path" =&gt; undefined,
        "hosts-value" =&gt; undefined,
        "max-queries" =&gt; 50,
        "n-dots" =&gt; undefined,
        "opt-resource-enabled" =&gt; undefined,
        "query-time-out" =&gt; undefined,
        "rd-flag" =&gt; undefined,
        "rotate-servers" =&gt; undefined,
        "round-robin-inet-address" =&gt; undefined,
        "search-domains" =&gt; undefined,
        "servers" =&gt; undefined
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>eventbus-option</code> refers to what <code>/subsystem=vertx/eventbus-option=ebo</code> defines:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">EventBusOptions definition:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[standalone@localhost:9990 /] /subsystem=vertx/eventbus-option=ebo:read-resource()
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "accept-backlog" =&gt; undefined,
        "client-auth" =&gt; undefined,
        "cluster-node-metadata" =&gt; undefined,
        "cluster-ping-interval" =&gt; undefined,
        "cluster-ping-reply-interval" =&gt; undefined,
        "cluster-public-host" =&gt; undefined,
        "cluster-public-port" =&gt; undefined,
        "connect-timeout" =&gt; undefined,
        "crl-paths" =&gt; undefined,
        "crl-values" =&gt; undefined,
        "enabled-cipher-suites" =&gt; undefined,
        "enabled-secure-transport-protocols" =&gt; undefined,
        "host" =&gt; undefined,
        "idle-timeout" =&gt; undefined,
        "idle-timeout-unit" =&gt; undefined,
        "key-cert-option" =&gt; undefined,
        "log-activity" =&gt; undefined,
        "openssl-session-cache-enabled" =&gt; undefined,
        "port" =&gt; undefined,
        "read-idle-timeout" =&gt; undefined,
        "receive-buffer-size" =&gt; undefined,
        "reconnect-attempts" =&gt; undefined,
        "reconnect-interval" =&gt; undefined,
        "reuse-address" =&gt; undefined,
        "reuse-port" =&gt; undefined,
        "send-buffer-size" =&gt; undefined,
        "so-linger" =&gt; 200,
        "ssl" =&gt; undefined,
        "ssl-engine-type" =&gt; undefined,
        "ssl-hand-shake-timeout" =&gt; undefined,
        "ssl-hand-shake-timeout-unit" =&gt; undefined,
        "tcp-cork" =&gt; undefined,
        "tcp-fast-open" =&gt; undefined,
        "tcp-keep-alive" =&gt; undefined,
        "tcp-no-delay" =&gt; undefined,
        "tcp-quick-ack" =&gt; undefined,
        "traffic-class" =&gt; undefined,
        "trust-all" =&gt; undefined,
        "trust-option" =&gt; undefined,
        "use-alpn" =&gt; undefined,
        "write-idle-timeout" =&gt; undefined
    }
}</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There are sub options used to create the <code>EventBusOptions</code>, including <code>key-store-option</code>, <code>pem-key-cert-option</code>, <code>pem-trust-option</code>, <code>cluster-node-metadata</code>, please use the corresponding <code>:read-resource-description()</code> operation for each attribute description.
</td>
</tr>
</table>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_create_a_clustered_vert_x_instance"><a class="anchor" href="#_create_a_clustered_vert_x_instance"></a><a class="link" href="#_create_a_clustered_vert_x_instance">4.1.2. Create a clustered Vert.x instance</a></h4>
<div class="paragraph">
<p>You need to specify <code>clustered=true</code> to create a clustered Vert.x instance, and you need to start the server with <code>vertx-ha</code> available, basically with <code>standalone-vertx*-ha.xml</code> configurations.</p>
</div>
<div class="paragraph">
<p>You have 2 options to set up the clustering configuration, one is to specify the JGroups stack file, the other is to specify the <code>jgroups-channel</code> from <code>jgroups</code> subsystem to compose the JGroups cluster.</p>
</div>
<div class="sect4">
<h5 id="_using_a_jgroups_stack_file"><a class="anchor" href="#_using_a_jgroups_stack_file"></a><a class="link" href="#_using_a_jgroups_stack_file">Using a JGroups stack file</a></h5>
<div class="paragraph">
<p>You can create a clustered Vert.x instance by specifying the JGroups stack file with the following command:</p>
</div>
<div class="listingblock">
<div class="title">Create clustered Vert.x instance using a JGroups stack file</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[standalone@localhost:9990 /] /subsystem=vertx/vertx=v3:add(clustered=true,jgroups-stack-file=jgroups-stack.xml)
{"outcome" =&gt; "success"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above command suppose there is a <code>jgroups-stack.xml</code> file existing at <code>${jboss.server.config.dir}</code>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The content inside the JGroups stack file should be consistent with the remote Vert.x instance to be able to compose a cluster. Please refer to <a href="http://www.jgroups.org/manual4/" class="bare">http://www.jgroups.org/manual4/</a> on the detail configuration of the stack.
</td>
</tr>
</table>
</div>
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_using_a_channel_from_jgroups_subsystem"><a class="anchor" href="#_using_a_channel_from_jgroups_subsystem"></a><a class="link" href="#_using_a_channel_from_jgroups_subsystem">Using a channel from jgroups subsystem</a></h5>
<div class="paragraph">
<p>Please use the following commands to create a JGroups channel for clustered Vert.x instance, which matches what default Vert.x Infinispan cluster ships:</p>
</div>
<div class="listingblock">
<div class="title">Configure JGroups channel for Vert.x</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">batch
/socket-binding-group=standard-sockets/socket-binding=jgroups-vertx:add(port=7800)
/socket-binding-group=standard-sockets/socket-binding=jgroups-vertx-mping:add(interface=private, multicast-port=46655, multicast-address=228.6.7.8
/socket-binding-group=standard-sockets/socket-binding=jgroups-vertx-tcp-fd:add(interface=private, port=57800)

/subsystem=jgroups/stack=tcp-vertx:add()
/subsystem=jgroups/stack=tcp-vertx/transport=TCP:add(socket-binding=jgroups-vertx)
/subsystem=jgroups/stack=tcp-vertx/protocol=MPING:add(socket-binding=jgroups-vertx-mping)
/subsystem=jgroups/stack=tcp-vertx/protocol=MERGE3:add()
/subsystem=jgroups/stack=tcp-vertx/protocol=FD_SOCK:add(socket-binding=jgroups-vertx-tcp-fd)
/subsystem=jgroups/stack=tcp-vertx/protocol=FD_ALL:add()
/subsystem=jgroups/stack=tcp-vertx/protocol=VERIFY_SUSPECT:add()
/subsystem=jgroups/stack=tcp-vertx/protocol=pbcast.NAKACK2:add()
/subsystem=jgroups/stack=tcp-vertx/protocol=UNICAST3:add()
/subsystem=jgroups/stack=tcp-vertx/protocol=pbcast.STABLE:add()
/subsystem=jgroups/stack=tcp-vertx/protocol=pbcast.GMS:add()
/subsystem=jgroups/stack=tcp-vertx/protocol=MFC:add()
/subsystem=jgroups/stack=tcp-vertx/protocol=FRAG3:add()
/subsystem=jgroups/channel=vertx:add(stack=tcp-vertx, cluster=ISPN)
run-batch
:reload</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the <code>default</code> Vert.x instance shipped in the <code>ha</code> configuration has the same setup as what the above commands achieve, remove it and create it again with the option defined above:</p>
</div>
<div class="listingblock">
<div class="title">Create Vert.x instance with JGroups channel specified</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[standalone@localhost:9990 /] /subsystem=vertx/vertx=default:remove()
{
    "outcome" =&gt; "success",
    "response-headers" =&gt; {
        "operation-requires-reload" =&gt; true,
        "process-state" =&gt; "reload-required"
    }
}

[standalone@localhost:9990 /] :reload
{
    "outcome" =&gt; "success",
    "result" =&gt; undefined
}

[standalone@localhost:9990 /] /subsystem=vertx/vertx=default:add(clustered=true, jgroups-channel=vertx)
{"outcome" =&gt; "success"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you have created a clustered Vert.x instance with JGroups channel set up from <code>jgroups</code> subsystem.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Remember to specify <code>-Djgroups.bind.address=127.0.0.1</code> in your another Vert.x instance to be able to compose the cluster.
</td>
</tr>
</table>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_update_to_the_vert_x_instance"><a class="anchor" href="#_update_to_the_vert_x_instance"></a><a class="link" href="#_update_to_the_vert_x_instance">4.2. Update to the Vert.x instance</a></h3>
<div class="paragraph">
<p>You can update the Vert.x using the <code>write-attribute</code> operation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[standalone@localhost:9990 /] /subsystem=vertx/vertx=default:write-attribute(name=jndi-name,value=java:/vertx/v1)
{
    "outcome" =&gt; "success",
    "response-headers" =&gt; {
        "operation-requires-reload" =&gt; true,
        "process-state" =&gt; "reload-required"
    }
}

[standalone@localhost:9990 /] :reload
{
    "outcome" =&gt; "success",
    "result" =&gt; undefined
}

[standalone@localhost:9990 /] /subsystem=vertx/vertx=default:read-resource()
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "alias" =&gt; ["vertx"],
        "clustered" =&gt; false,
        "forked-channel" =&gt; false,
        "jgroups-channel" =&gt; undefined,
        "jgroups-stack-file" =&gt; undefined,
        "jndi-name" =&gt; "java:/vertx/v1",
        "option-name" =&gt; undefined
    }
}</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Any update to the Vert.x instance requires <code>reload-required</code>.
</td>
</tr>
</table>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vertx_used_in_application"><a class="anchor" href="#_vertx_used_in_application"></a><a class="link" href="#_vertx_used_in_application">5. Vertx used in application</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you created Vert.x instance, you can use it in your applications.</p>
</div>
<div class="paragraph">
<p>Vert.x instance is the key to all Vert.x applications, every function and capability comes from the Vert.x instance, so having the Vert.x instance injected in the application codes is important.</p>
</div>
<div class="sect2">
<h3 id="_access_the_vert_x_instance_using_jndi_lookup"><a class="anchor" href="#_access_the_vert_x_instance_using_jndi_lookup"></a><a class="link" href="#_access_the_vert_x_instance_using_jndi_lookup">5.1. Access the Vert.x instance using JNDI lookup</a></h3>
<div class="paragraph">
<p>Suppose you have a Vert.x instance created:</p>
</div>
<div class="listingblock">
<div class="title">Default Vert.x Instance</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[standalone@localhost:9990 /] /subsystem=vertx/vertx=default:read-resource()
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "alias" =&gt; ["vertx"],
        "clustered" =&gt; false,
        "forked-channel" =&gt; false,
        "jgroups-channel" =&gt; undefined,
        "jgroups-stack-file" =&gt; undefined,
        "jndi-name" =&gt; "java:/vertx/default",
        "option-name" =&gt; undefined
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>you can access the Vert.x using the <code>@Resource</code> annotation like:</p>
</div>
<div class="listingblock">
<div class="title">Access Vert.x using JNDI lookup</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@WebServlet(value = "/async", asyncSupported = true)
public class AsyncServlet extends HttpServlet {

    @Resource(name = "java:/vertx/default")
    private Vertx vertx;

        @Override
    public void init() throws ServletException {
        vertx.eventBus()
                .&lt;String&gt;consumer("echo")
                .handler(msg -&gt; msg.reply(msg.body()));
    }
}</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Do not call <code>vertx.close();</code> in application code which will affect usage in other places, there is a plan to restrict the usage in next releases to have better lifecycle management.
</td>
</tr>
</table>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_access_the_vert_x_instance_using_cdi"><a class="anchor" href="#_access_the_vert_x_instance_using_cdi"></a><a class="link" href="#_access_the_vert_x_instance_using_cdi">5.2. Access the Vert.x instance using CDI</a></h3>
<div class="paragraph">
<p>The other way to use the Vert.x instance in the application is to use <code>@Inject Vertx vertx</code> annotation. When the CDI is activated(a <code>beans.xml</code> file), the Vert.x instance will be injected. The instance which has the same <code>name</code> or <code>alias</code> as the field name(injection point) will be chosen.</p>
</div>
<div class="listingblock">
<div class="title">Access Vert.x instance using CDI</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Stateless
public class EchoService {
    @Inject
    private Vertx vertx;

    @Asynchronous
    public Future&lt;String&gt; echo(String message) {
        return (CompletableFuture&lt;String&gt;)vertx.eventBus()
                   .request("echo", message)
                   .map(msg -&gt; msg.body().toString()).toCompletionStage();
    }

}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploy_verticles_to_wildfly_server"><a class="anchor" href="#_deploy_verticles_to_wildfly_server"></a><a class="link" href="#_deploy_verticles_to_wildfly_server">6. Deploy verticles to WildFly server</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>With this extension integrated, you can deploy the Vert.x verticle implementation to the WildFly server by specifying a deployment descriptor.</p>
</div>
<div class="paragraph">
<p>The availability of the deployment descriptor activates a <code>DeploymentUnitProcessor</code> to check the existing Vert.x instances inside the WildFly server, and select the one specified in the deployment descriptor.</p>
</div>
<div class="paragraph">
<p>A typical war deployment structure which contains a verticle implementation is:</p>
</div>
<div class="listingblock">
<div class="title">WAR deployment with verticle implementation</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">test-verticle.war:
/WEB-INF/
/WEB-INF/vertx-deployment.json
/WEB-INF/classes/
/WEB-INF/classes/org/
/WEB-INF/classes/org/wildfly/
/WEB-INF/classes/org/wildfly/extension/
/WEB-INF/classes/org/wildfly/extension/vertx/
/WEB-INF/classes/org/wildfly/extension/vertx/test/
/WEB-INF/classes/org/wildfly/extension/vertx/test/mini/
/WEB-INF/classes/org/wildfly/extension/vertx/test/mini/deployment/
/WEB-INF/classes/org/wildfly/extension/vertx/test/mini/deployment/TestVerticle.class</code></pre>
</div>
</div>
<div class="paragraph">
<p>The content of the deployment descriptor(<code>WEB-INF/vertx-deployment.json</code>) is:</p>
</div>
<div class="listingblock">
<div class="title">Deployment descriptor content</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "deployments": [
    {
      "verticle-class": "org.wildfly.extension.vertx.test.mini.deployment.TestVerticle",
      "vertx": "default"
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>when it is deployed, the <code>TestVerticle</code> will be deployed to the Vert.x instance with name: <code>default</code> using the default <code>DeploymentOptions</code> too.</p>
</div>
<div class="paragraph">
<p>These deployed verticles inside the Vert.x instance will be un-deployed when the deployment gets un-deployed from WildFly server.</p>
</div>
<div class="sect2">
<h3 id="_deployment_descriptor"><a class="anchor" href="#_deployment_descriptor"></a><a class="link" href="#_deployment_descriptor">6.1. Deployment Descriptor</a></h3>
<div class="paragraph">
<p>The deployment descriptor to be able to deploy the verticle is either at <code>META-INF/vertx-deployment.json</code> or <code>WEB-INF/vertx-deployment.json</code>.</p>
</div>
<div class="paragraph">
<p>A full example of <code>vertx-deployment.json</code> is:</p>
</div>
<div class="listingblock">
<div class="title">Full example of vertx-deployment.json</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "ver": 1,
  "deployments": [
    {
      "verticle-class": "org.wildfly.extension.vertx.test.mini.deployment.TestVerticle",
      "vertx": "default",
      "deploy-options": {}
    }
  ]
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ver</code>    -    The version of the deployment descriptor, it is <code>1</code>, and it can be skipped now.</p>
</li>
<li>
<p><code>deployments</code>    -    An array of the deployments, each of which is a json structure.</p>
<div class="ulist">
<ul>
<li>
<p><code>verticle-class</code>    -    The FQCN of the verticle class which will be deployed.</p>
</li>
<li>
<p><code>vertx</code>    -    The vertx name which the verticle should be deployed to.</p>
<div class="ulist">
<ul>
<li>
<p>Defaults to <code>default</code> if not specified.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>deploy-options</code>    -    The <code>DeploymentOptions</code> which is used to do the deployment.</p>
<div class="ulist">
<ul>
<li>
<p>The format of the content matches what <a href="https://vertx.io/docs/apidocs/io/vertx/core/DeploymentOptions.html#DeploymentOptions-io.vertx.core.json.JsonObject-">new DeploymentOptions(JsonObject)</a> constructor requires.</p>
</li>
<li>
<p>Default <code>DeploymentOptions</code> is used if not specified.</p>
</li>
<li>
<p>The <code>ModuleClassLoader</code> of current deployment will be used for deploying the Verticle.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0.0-SNAPSHOT<br>
Last updated 2022-05-16 20:00:22 +0800
</div>
</div>
</body>
</html>